"use strict";
var blesser, config, registerCommand, registration;

config = require('./config');

blesser = require('./blesser');

registration = function(mimosaConfig, register) {
  register(['preClean'], 'init', blesser.cleanBlessed);
  register(['add', 'update', 'remove'], 'afterWrite', blesser.checkForBless);
  return register(['postBuild'], 'init', blesser.blessAll);
};

registerCommand = function(program, retrieveConfig) {
  return program.command('bless').description('invokes bless compiler using config settings').action(function() {
    return blesser.blessCommand(retrieveConfig);
  });
};

module.exports = {
  registration: registration,
  defaults: config.defaults,
  placeholder: config.placeholder,
  validate: config.validate,
  registerCommand: registerCommand
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3NtaXRobS9kZXYvbWltb3NhLWJsZXNzL2xpYi9pbmRleC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zbWl0aG0vZGV2L21pbW9zYS1ibGVzcy9zcmMvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQUEsQ0FBQTtBQUFBLElBQUEsOENBQUE7O0FBQUEsTUFFQSxHQUFTLE9BQUEsQ0FBUSxVQUFSLENBRlQsQ0FBQTs7QUFBQSxPQUdBLEdBQVUsT0FBQSxDQUFRLFdBQVIsQ0FIVixDQUFBOztBQUFBLFlBS0EsR0FBZSxTQUFDLFlBQUQsRUFBZSxRQUFmLEdBQUE7QUFDYixFQUFBLFFBQUEsQ0FBUyxDQUFDLFVBQUQsQ0FBVCxFQUF1QixNQUF2QixFQUErQixPQUFPLENBQUMsWUFBdkMsQ0FBQSxDQUFBO0FBQUEsRUFDQSxRQUFBLENBQVMsQ0FBQyxLQUFELEVBQVEsUUFBUixFQUFrQixRQUFsQixDQUFULEVBQXNDLFlBQXRDLEVBQW9ELE9BQU8sQ0FBQyxhQUE1RCxDQURBLENBQUE7U0FFQSxRQUFBLENBQVMsQ0FBQyxXQUFELENBQVQsRUFBd0IsTUFBeEIsRUFBZ0MsT0FBTyxDQUFDLFFBQXhDLEVBSGE7QUFBQSxDQUxmLENBQUE7O0FBQUEsZUFVQSxHQUFrQixTQUFDLE9BQUQsRUFBVSxjQUFWLEdBQUE7U0FDaEIsT0FDRSxDQUFDLE9BREgsQ0FDVyxPQURYLENBRUUsQ0FBQyxXQUZILENBRWUsOENBRmYsQ0FHRSxDQUFDLE1BSEgsQ0FHVSxTQUFBLEdBQUE7V0FDTixPQUFPLENBQUMsWUFBUixDQUFxQixjQUFyQixFQURNO0VBQUEsQ0FIVixFQURnQjtBQUFBLENBVmxCLENBQUE7O0FBQUEsTUFpQk0sQ0FBQyxPQUFQLEdBQ0U7QUFBQSxFQUFBLFlBQUEsRUFBaUIsWUFBakI7QUFBQSxFQUNBLFFBQUEsRUFBaUIsTUFBTSxDQUFDLFFBRHhCO0FBQUEsRUFFQSxXQUFBLEVBQWlCLE1BQU0sQ0FBQyxXQUZ4QjtBQUFBLEVBR0EsUUFBQSxFQUFpQixNQUFNLENBQUMsUUFIeEI7QUFBQSxFQUlBLGVBQUEsRUFBaUIsZUFKakI7Q0FsQkYsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXG5cbmNvbmZpZyA9IHJlcXVpcmUgJy4vY29uZmlnJ1xuYmxlc3NlciA9IHJlcXVpcmUgJy4vYmxlc3NlcidcblxucmVnaXN0cmF0aW9uID0gKG1pbW9zYUNvbmZpZywgcmVnaXN0ZXIpIC0+XG4gIHJlZ2lzdGVyIFsncHJlQ2xlYW4nXSwgJ2luaXQnLCBibGVzc2VyLmNsZWFuQmxlc3NlZFxuICByZWdpc3RlciBbJ2FkZCcsICd1cGRhdGUnLCAncmVtb3ZlJ10sICdhZnRlcldyaXRlJywgYmxlc3Nlci5jaGVja0ZvckJsZXNzXG4gIHJlZ2lzdGVyIFsncG9zdEJ1aWxkJ10sICdpbml0JywgYmxlc3Nlci5ibGVzc0FsbFxuXG5yZWdpc3RlckNvbW1hbmQgPSAocHJvZ3JhbSwgcmV0cmlldmVDb25maWcpIC0+XG4gIHByb2dyYW1cbiAgICAuY29tbWFuZCgnYmxlc3MnKVxuICAgIC5kZXNjcmlwdGlvbignaW52b2tlcyBibGVzcyBjb21waWxlciB1c2luZyBjb25maWcgc2V0dGluZ3MnKVxuICAgIC5hY3Rpb24gKCkgLT5cbiAgICAgIGJsZXNzZXIuYmxlc3NDb21tYW5kIHJldHJpZXZlQ29uZmlnXG5cbm1vZHVsZS5leHBvcnRzID1cbiAgcmVnaXN0cmF0aW9uOiAgICByZWdpc3RyYXRpb25cbiAgZGVmYXVsdHM6ICAgICAgICBjb25maWcuZGVmYXVsdHNcbiAgcGxhY2Vob2xkZXI6ICAgICBjb25maWcucGxhY2Vob2xkZXJcbiAgdmFsaWRhdGU6ICAgICAgICBjb25maWcudmFsaWRhdGVcbiAgcmVnaXN0ZXJDb21tYW5kOiByZWdpc3RlckNvbW1hbmRcbiJdfQ==
