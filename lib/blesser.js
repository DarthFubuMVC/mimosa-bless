var blessAll, blessCommand, blessFile, checkForBless, cleanBlessed, color, fs, gatherFiles, logger, parser, path, printObj, trackCompletion, wrench, _, _ref;

parser = require('bless').parser;

fs = require('fs');

path = require('path');

logger = require('logmimosa');

color = require('ansi-color').set;

_ = require('lodash');

wrench = require('wrench');

_ref = require('./util'), printObj = _ref.printObj, trackCompletion = _ref.trackCompletion;

blessFile = function(input, output, options, next) {
  if (!fs.existsSync(input)) {
    return logger.warn("mimosa-bless: bless file [[ " + input + " ]] does not exist");
  }
  logger.info("Blessing [[ " + input + " ]]");
  return fs.readFile(input, 'utf-8', function(e, data) {
    var blessData, numFiles, numSelectors;
    if (e) {
      logger.error("blessc: " + e.message);
      next();
    }
    logger.debug("finished reading file[[ " + input + " ]]");
    logger.debug("running bless parser on [[ " + input + " ]]");
    blessData = parser(data);
    numFiles = blessData.data.length;
    numSelectors = blessData.numSelectors;
    logger.info("Source CSS file [[ " + input + " ]] contained " + numSelectors + " selectors");
    if (numFiles > 1 || input !== output) {
      _.each(blessData.data, function(data, index) {
        var fd, name;
        name = index === 0 ? input : input.replace('.css', "-blessed" + index + ".css");
        fd = fs.openSync(name, 'w');
        return fs.writeSync(fd, data, 0, 'utf-8');
      });
      logger.success("" + numFiles + " CSS files created for " + input);
    } else {
      logger.success("No changes made.");
    }
    return next(blessData);
  });
};

cleanBlessed = function(mimosaConfig, options, next) {
  return next();
};

checkForBless = function(mimosaConfig, options, next) {
  return next();
};

gatherFiles = function(filesFromOptions) {
  return _(filesFromOptions).map(function(entry) {
    if (fs.statSync(entry).isDirectory()) {
      return wrench.readdirSyncRecursive(entry).filter(function(f) {
        return (path.extname(f)) === ".css";
      }).map(function(f) {
        return path.join(entry, f);
      });
    } else {
      return [entry];
    }
  }).flatten().uniq().value();
};

blessAll = function(mimosaConfig, options, next) {
  var blessOnWatch, files, finish, isBuild, settings, sources, uniqueInputs;
  isBuild = mimosaConfig.isBuild;
  settings = mimosaConfig.bless.options;
  files = gatherFiles(mimosaConfig.bless.files);
  blessOnWatch = mimosaConfig.bless.blessOnWatch;
  logger.debug("bless files: " + files);
  logger.debug("blessOnWatch: " + blessOnWatch);
  logger.debug("isBuild: " + isBuild);
  if (!(blessOnWatch || isBuild)) {
    next();
    return;
  }
  logger.info("Blessing files");
  sources = _.map(files, function(value, key) {
    var input, output;
    input = _.isString(key) ? key : value;
    output = value;
    return {
      input: input,
      output: output
    };
  });
  uniqueInputs = _.map(sources, function(_arg) {
    var input, output;
    input = _arg.input, output = _arg.output;
    return input;
  });
  finish = trackCompletion("blessSources", uniqueInputs, next);
  return _.each(sources, function(_arg) {
    var input, output;
    input = _arg.input, output = _arg.output;
    return blessFile(input, output, settings, function() {
      return finish(input);
    });
  });
};

blessCommand = function(retrieveConfig) {
  return retrieveConfig(false, function(config) {
    config.isBuild = true;
    return blessAll(config, {}, (function() {}));
  });
};

module.exports = {
  blessAll: blessAll,
  checkForBless: checkForBless,
  cleanBlessed: cleanBlessed,
  blessCommand: blessCommand,
  blessFile: blessFile
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2FsZXhhYmUvcmVwb3MvbWltb3NhLWJsZXNzL2xpYi9ibGVzc2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2FsZXhhYmUvcmVwb3MvbWltb3NhLWJsZXNzL3NyYy9ibGVzc2VyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLHdKQUFBOztBQUFBLFNBQVcsT0FBQSxDQUFRLE9BQVIsRUFBVixNQUFELENBQUE7O0FBQUEsRUFDQSxHQUFLLE9BQUEsQ0FBUSxJQUFSLENBREwsQ0FBQTs7QUFBQSxJQUVBLEdBQU8sT0FBQSxDQUFRLE1BQVIsQ0FGUCxDQUFBOztBQUFBLE1BR0EsR0FBUyxPQUFBLENBQVEsV0FBUixDQUhULENBQUE7O0FBQUEsS0FJQSxHQUFRLE9BQUEsQ0FBUSxZQUFSLENBQXFCLENBQUMsR0FKOUIsQ0FBQTs7QUFBQSxDQUtBLEdBQUksT0FBQSxDQUFRLFFBQVIsQ0FMSixDQUFBOztBQUFBLE1BTUEsR0FBUyxPQUFBLENBQVEsUUFBUixDQU5ULENBQUE7O0FBQUEsT0FPOEIsT0FBQSxDQUFRLFFBQVIsQ0FBOUIsRUFBQyxnQkFBQSxRQUFELEVBQVcsdUJBQUEsZUFQWCxDQUFBOztBQUFBLFNBU0EsR0FBWSxTQUFDLEtBQUQsRUFBUSxNQUFSLEVBQWdCLE9BQWhCLEVBQXlCLElBQXpCLEdBQUE7QUFDVixFQUFBLElBQUEsQ0FBQSxFQUFTLENBQUMsVUFBSCxDQUFjLEtBQWQsQ0FBUDtBQUNFLFdBQU8sTUFBTSxDQUFDLElBQVAsQ0FBYSw4QkFBQSxHQUE2QixLQUE3QixHQUFvQyxvQkFBakQsQ0FBUCxDQURGO0dBQUE7QUFBQSxFQUdBLE1BQU0sQ0FBQyxJQUFQLENBQWEsY0FBQSxHQUFhLEtBQWIsR0FBb0IsS0FBakMsQ0FIQSxDQUFBO1NBS0EsRUFBRSxDQUFDLFFBQUgsQ0FBWSxLQUFaLEVBQW1CLE9BQW5CLEVBQTRCLFNBQUMsQ0FBRCxFQUFJLElBQUosR0FBQTtBQUMxQixR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cUJBLFlBQUEsR0FBZSxDQUFDLENBQUMsR0FBRixDQUFNLE9BQU4sRUFBZSxTQUFDLElBQUQsR0FBQTtBQUFxQixRQUFBLGFBQUE7QUFBQSxJQUFuQixhQUFBLE9BQU8sY0FBQSxNQUFZLENBQUE7V0FBQSxNQUFyQjtFQUFBLENBQWYsQ0FyQmYsQ0FBQTtBQUFBLEVBdUJBLE1BQUEsR0FBUyxlQUFBLENBQWdCLGNBQWhCLEVBQWdDLFlBQWhDLEVBQThDLElBQTlDLENBdkJULENBQUE7U0F5QkEsQ0FBQyxDQUFDLElBQUYsQ0FBTyxPQUFQLEVBQWdCLFNBQUMsSUFBRCxHQUFBO0FBQ2QsUUFBQSxhQUFBO0FBQUEsSUFEZ0IsYUFBQSxPQUFPLGNBQUEsTUFDdkIsQ0FBQTtXQUFBLFNBQUEsQ0FBVSxLQUFWLEVBQWlCLE1BQWpCLEVBQXlCLFFBQXpCLEVBQW1DLFNBQUEsR0FBQTthQUFNLE1BQUEsQ0FBTyxLQUFQLEVBQU47SUFBQSxDQUFuQyxFQURjO0VBQUEsQ0FBaEIsRUE1QlM7QUFBQSxDQXpEWCxDQUFBOztBQUFBLFlBd0ZBLEdBQWUsU0FBQyxjQUFELEdBQUE7U0FDYixjQUFBLENBQWUsS0FBZixFQUFzQixTQUFDLE1BQUQsR0FBQTtBQUNwQixJQUFBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLElBQWpCLENBQUE7V0FDQSxRQUFBLENBQVMsTUFBVCxFQUFpQixFQUFqQixFQUFxQixDQUFDLFNBQUEsR0FBQSxDQUFELENBQXJCLEVBRm9CO0VBQUEsQ0FBdEIsRUFEYTtBQUFBLENBeEZmLENBQUE7O0FBQUEsTUE2Rk0sQ0FBQyxPQUFQLEdBQWlCO0FBQUEsRUFBQyxVQUFBLFFBQUQ7QUFBQSxFQUFXLGVBQUEsYUFBWDtBQUFBLEVBQTBCLGNBQUEsWUFBMUI7QUFBQSxFQUF3QyxjQUFBLFlBQXhDO0FBQUEsRUFBc0QsV0FBQSxTQUF0RDtDQTdGakIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIntwYXJzZXJ9ID0gcmVxdWlyZSAnYmxlc3MnXHJcbmZzID0gcmVxdWlyZSAnZnMnXHJcbnBhdGggPSByZXF1aXJlICdwYXRoJ1xyXG5sb2dnZXIgPSByZXF1aXJlICdsb2dtaW1vc2EnXHJcbmNvbG9yID0gcmVxdWlyZSgnYW5zaS1jb2xvcicpLnNldFxyXG5fID0gcmVxdWlyZSAnbG9kYXNoJ1xyXG53cmVuY2ggPSByZXF1aXJlICd3cmVuY2gnXHJcbntwcmludE9iaiwgdHJhY2tDb21wbGV0aW9ufSA9IHJlcXVpcmUgJy4vdXRpbCdcclxuXHJcbmJsZXNzRmlsZSA9IChpbnB1dCwgb3V0cHV0LCBvcHRpb25zLCBuZXh0KSAtPlxyXG4gIHVubGVzcyBmcy5leGlzdHNTeW5jIGlucHV0XHJcbiAgICByZXR1cm4gbG9nZ2VyLndhcm4gXCJtaW1vc2EtYmxlc3M6IGJsZXNzIGZpbGUgW1sgI3tpbnB1dH0gXV0gZG9lcyBub3QgZXhpc3RcIlxyXG5cclxuICBsb2dnZXIuaW5mbyBcIkJsZXNzaW5nIFtbICN7aW5wdXR9IF1dXCJcclxuXHJcbiAgZnMucmVhZEZpbGUgaW5wdXQsICd1dGYtOCcsIChlLCBkYXRhKSAtPlxyXG4gICAgaWYgKGUpXHJcbiAgICAgIGxvZ2dlci5lcnJvciBcImJsZXNzYzogXCIgKyBlLm1lc3NhZ2VcclxuICAgICAgbmV4dCgpXHJcblxyXG4gICAgbG9nZ2VyLmRlYnVnIFwiZmluaXNoZWQgcmVhZGluZyBmaWxlW1sgI3tpbnB1dH0gXV1cIlxyXG5cclxuICAgIGxvZ2dlci5kZWJ1ZyBcInJ1bm5pbmcgYmxlc3MgcGFyc2VyIG9uIFtbICN7aW5wdXR9IF1dXCJcclxuICAgIGJsZXNzRGF0YSA9IHBhcnNlciBkYXRhXG4gICAgbnVtRmlsZXMgPSBibGVzc0RhdGEuZGF0YS5sZW5ndGhcbiAgICBudW1TZWxlY3RvcnMgPSBibGVzc0RhdGEubnVtU2VsZWN0b3JzXG4gICAgbG9nZ2VyLmluZm8gXCJTb3VyY2UgQ1NTIGZpbGUgW1sgI3tpbnB1dH0gXV0gY29udGFpbmVkICN7bnVtU2VsZWN0b3JzfSBzZWxlY3RvcnNcIlxuICAgIGlmIChudW1GaWxlcyA+IDEgfHwgaW5wdXQgIT0gb3V0cHV0KVxuICAgICAgXy5lYWNoIGJsZXNzRGF0YS5kYXRhLCAoZGF0YSwgaW5kZXgpIC0+XG4gICAgICAgIG5hbWUgPSBpZiBpbmRleCA9PSAwIHRoZW4gIGlucHV0IGVsc2UgaW5wdXQucmVwbGFjZSAnLmNzcycsIFwiLWJsZXNzZWQje2luZGV4fS5jc3NcIlxuICAgICAgICBmZCA9IGZzLm9wZW5TeW5jIG5hbWUsICd3J1xuICAgICAgICBmcy53cml0ZVN5bmMgZmQsIGRhdGEsIDAsICd1dGYtOCdcbiAgICAgIGxvZ2dlci5zdWNjZXNzIFwiI3tudW1GaWxlc30gQ1NTIGZpbGVzIGNyZWF0ZWQgZm9yICN7aW5wdXR9XCJcbiAgICBlbHNlXG4gICAgICBsb2dnZXIuc3VjY2VzcyBcIk5vIGNoYW5nZXMgbWFkZS5cIlxuICAgIG5leHQoYmxlc3NEYXRhKVxuXHJcbmNsZWFuQmxlc3NlZCA9IChtaW1vc2FDb25maWcsIG9wdGlvbnMsIG5leHQpIC0+XHJcbiAgI1RPRE86IGNsZWFuIHVwIGFueSBnZW5lcmF0ZWQgYmxlc3MgZmlsZXNcclxuICBuZXh0KClcclxuXHJcbmNoZWNrRm9yQmxlc3MgPSAobWltb3NhQ29uZmlnLCBvcHRpb25zLCBuZXh0KSAtPlxyXG4gICNUT0RPOiBzdXBwb3J0IGJsZXNzaW5nIGluIHdhdGNoIG1vZGUgaWYgZmlsZXMgZ2V0IGFkZGVkXHJcbiAgbmV4dCgpXHJcblxyXG5nYXRoZXJGaWxlcyA9IChmaWxlc0Zyb21PcHRpb25zKSAtPlxyXG4gIF8gZmlsZXNGcm9tT3B0aW9uc1xyXG4gICAgLm1hcCAoZW50cnkpIC0+XHJcbiAgICAgIGlmIGZzLnN0YXRTeW5jKGVudHJ5KS5pc0RpcmVjdG9yeSgpXHJcbiAgICAgIHRoZW4gd3JlbmNoLnJlYWRkaXJTeW5jUmVjdXJzaXZlKGVudHJ5KS5maWx0ZXIgKGYpIC0+XHJcbiAgICAgICAgKHBhdGguZXh0bmFtZSBmKSA9PSBcIi5jc3NcIlxyXG4gICAgICAubWFwIChmKSAtPiBwYXRoLmpvaW4gZW50cnksIGZcclxuICAgICAgZWxzZSBbZW50cnldXHJcbiAgICAuZmxhdHRlbigpXHJcbiAgICAudW5pcSgpXHJcbiAgICAudmFsdWUoKVxyXG5cclxuYmxlc3NBbGwgPSAobWltb3NhQ29uZmlnLCBvcHRpb25zLCBuZXh0KSAtPlxyXG4gICNUT0RPOiBmb3Igc29tZSByZWFzb24gdGhpcyBnb2VzIHJlYWxseSBzbG93IGluIHdhdGNoIG1vZGVcclxuICAjd2hlbiB3b3JraW5nIHdpdGggYSBsYXJnZSBjb2RlIGJhc2UsIG5lZWQgdG8gaW52ZXN0aWdhdGVcclxuICBpc0J1aWxkID0gbWltb3NhQ29uZmlnLmlzQnVpbGRcclxuICBzZXR0aW5ncyA9IG1pbW9zYUNvbmZpZy5ibGVzcy5vcHRpb25zXHJcbiAgZmlsZXMgPSBnYXRoZXJGaWxlcyBtaW1vc2FDb25maWcuYmxlc3MuZmlsZXNcclxuXHJcbiAgYmxlc3NPbldhdGNoID0gbWltb3NhQ29uZmlnLmJsZXNzLmJsZXNzT25XYXRjaFxyXG5cclxuICBsb2dnZXIuZGVidWcgXCJibGVzcyBmaWxlczogI3tmaWxlc31cIlxyXG4gIGxvZ2dlci5kZWJ1ZyBcImJsZXNzT25XYXRjaDogI3tibGVzc09uV2F0Y2h9XCJcclxuICBsb2dnZXIuZGVidWcgXCJpc0J1aWxkOiAje2lzQnVpbGR9XCJcclxuICB1bmxlc3MgYmxlc3NPbldhdGNoIG9yIGlzQnVpbGRcclxuICAgIG5leHQoKVxyXG4gICAgcmV0dXJuXHJcblxyXG4gIGxvZ2dlci5pbmZvIFwiQmxlc3NpbmcgZmlsZXNcIlxyXG5cclxuICAjVE9ETzogc3VwcG9ydCBvdXRwdXQgcGVyIGZpbGVuYW1lIHZpYSBvYmplY3QgZW50cnkgaWYgZGVzaXJlZFxyXG4gIHNvdXJjZXMgPSBfLm1hcCBmaWxlcywgKHZhbHVlLCBrZXkpIC0+XHJcbiAgICBpbnB1dCA9IGlmIF8uaXNTdHJpbmcoa2V5KSB0aGVuIGtleSBlbHNlIHZhbHVlXHJcbiAgICBvdXRwdXQgPSB2YWx1ZVxyXG4gICAge2lucHV0LCBvdXRwdXR9XHJcblxyXG4gIHVuaXF1ZUlucHV0cyA9IF8ubWFwIHNvdXJjZXMsICh7aW5wdXQsIG91dHB1dH0pIC0+IGlucHV0XHJcblxyXG4gIGZpbmlzaCA9IHRyYWNrQ29tcGxldGlvbiBcImJsZXNzU291cmNlc1wiLCB1bmlxdWVJbnB1dHMsIG5leHRcclxuXHJcbiAgXy5lYWNoIHNvdXJjZXMsICh7aW5wdXQsIG91dHB1dH0pIC0+XHJcbiAgICBibGVzc0ZpbGUgaW5wdXQsIG91dHB1dCwgc2V0dGluZ3MsICgpIC0+IGZpbmlzaChpbnB1dClcclxuXHJcbmJsZXNzQ29tbWFuZCA9IChyZXRyaWV2ZUNvbmZpZykgLT5cclxuICByZXRyaWV2ZUNvbmZpZyBmYWxzZSwgKGNvbmZpZykgLT5cclxuICAgIGNvbmZpZy5pc0J1aWxkID0gdHJ1ZVxyXG4gICAgYmxlc3NBbGwgY29uZmlnLCB7fSwgKC0+KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7Ymxlc3NBbGwsIGNoZWNrRm9yQmxlc3MsIGNsZWFuQmxlc3NlZCwgYmxlc3NDb21tYW5kLCBibGVzc0ZpbGV9XHJcbiJdfQ==
